# 미션 - 자판기

## 🛠 구현 기능 목록

### 1. 보유 금액
 * [x] 보유 금액을 `입력` 받는다.
 * [x] 보유 금액은 `정수`이다.
 * [x] 보유 금액은 `음수가 될 수 없다.`
 * [x] 보유 금액은 `10으로 나누어 떨어져야 한다.`
 * [x] 보유 금액으로 동전을 `무작위`로 생성한다.
 * [x] 생성이 완료되면 동전 별 보유 개수를 `출력`한다. 보유 개수가 0개인 경우에도 출력을 진행한다.

### 2. 상품
 * [x] `상품명`, `가격`, `수량`을 `입력`하여 상품을 추가한다.
 * [x] `개별 상품`은 대괄호`[]`로 묶어 세미콜론`;`으로 구분한다. ex) `[콜라,1500,20];[사이다,1000,10]`
 * [x] 상품이 한 개 이상인 경우 `세미콜론`으로 구분되어야 한다.
 * [x] `개별 상품`은 `대괄호`로 묶여 있어야 한다.
 * [x] `개별 상품`의 형식이 잘못된 경우 예외를 던진다. ex) `[콜라,1500,20][콜라,1500,20]`, `[콜라,1500]`
 * [x] `상품의 이름`이 `비어있는 경우` 예외를 던진다. ex) ``
 * [x] `상품의 이름`이 `공백인 경우` 예외를 던진다. ex) ` `
 * [x] `상품의 이름`은 중복될 수 없다. 중복된 경우 예외를 던진다.
 * [x] `상품의 가격`은 `정수`이다.
 * [x] `상품의 가격`은 `음수가 될 수 없다.`
 * [x] `상품의 가격`은 `100원 부터 시작`한다.
 * [x] `상품의 가격`은 `10원으로 나누어 떨어져야 한다.`
 * [x] `상품의 수량`은 `정수`이다.
 * [x] `상품의 수량`은 `음수가 될 수 없다.`
 * [x] `상품의 수량`은 적어도 `1개 이상`이다.

### 3. 투입 금액
 * [x] 투입 금액을 `입력` 받는다.
 * [x] 투입 금액은 `정수`이다.
 * [x] 투입 금액은 `음수가 될 수 없다.`
 * [x] 투입 금액은 `10으로 나누어 떨어져야 한다.`
 * [x] 투입 금액으로는 동전을 생성하지 않는다.
 * [x] 투입 금액으로 `제공된 상품을 구매할 수 없는 경우(구매 가능 상품 최저가 보다 적은 경우)` 예외를 던진다.

### 4. 구매
 * [x] 상품 구매를 위해 상품명을 `입력`한다.
 * [x] `구매 상품의 이름`이 `비어있는 경우` 예외를 던진다.
 * [x] `구매 상품의 이름`이 `공백인 경우` 예외를 던진다.
 * [x] `상품이 존재하지 않는 경우` 예외를 던지고 재입력을 진행한다.
 * [x] 상품 구매를 진행 할 때 `현재 투입 금액`이 `출력`된다.
 * [x] 투입 금액이 `구매 가능한 상품의 최저 가격보다 적거나`, `모든 상품이 소진된 경우` 구매가 불가능 하다.

### 5. 잔돈 반환
 * [x] 구매가 완료되면 `잔돈을 반환`한다.
 * [x] 잔돈을 반환할 수 없는 경우 잔돈으로 `반환할 수 있는 금액만 반환`한다.
 * [x] 현재 투입 금액을 출력하고 `투입 금액의 최소 개수의 동전`으로 잔돈을 돌려준다.
 * [x] 반환되지 않은 금액은 자판기에 남는다.
 
## 📝 고민 사항 기록

1,2 주차 피드백과 미션을 해결하며 고민하고 학습한 것을 공유하기 위해 아래와 같이 기록을 진행하였습니다.

 * [1. 시작하기 전](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_1-%E1%84%89%E1%85%B5%E1%84%8C%E1%85%A1%E1%86%A8%E1%84%92%E1%85%A1%E1%84%80%E1%85%B5-%E1%84%8C%E1%85%A5%E1%86%AB)
 * [2. 구현 목록 정리](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_2-%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB-%E1%84%86%E1%85%A9%E1%86%A8%E1%84%85%E1%85%A9%E1%86%A8-%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%85%E1%85%B5)
 * [3. Can’t automatically merge](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_3-can-t-automatically-merge)
 * [4. MVC 패턴](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_4-mvc-%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB)
 * [5. 비즈니스 로직과 UI 로직 분리](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_5-%E1%84%87%E1%85%B5%E1%84%8C%E1%85%B3%E1%84%82%E1%85%B5%E1%84%89%E1%85%B3-%E1%84%85%E1%85%A9%E1%84%8C%E1%85%B5%E1%86%A8%E1%84%80%E1%85%AA-ui-%E1%84%85%E1%85%A9%E1%84%8C%E1%85%B5%E1%86%A8-%E1%84%87%E1%85%AE%E1%86%AB%E1%84%85%E1%85%B5)
 * [6. Stream 활용](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_6-stream-%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC)
 * [7. enum](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_7-enum)
 * [8. 객체에게 메시지 보내기](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_8-%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6%E1%84%8B%E1%85%A6%E1%84%80%E1%85%A6-%E1%84%86%E1%85%A6%E1%84%89%E1%85%B5%E1%84%8C%E1%85%B5-%E1%84%87%E1%85%A9%E1%84%82%E1%85%A2%E1%84%80%E1%85%B5)
 * [9. 과도한 검증 코드와 책임의 이전](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html#_9-%E1%84%80%E1%85%AA%E1%84%83%E1%85%A9%E1%84%92%E1%85%A1%E1%86%AB-%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC-%E1%84%8F%E1%85%A9%E1%84%83%E1%85%B3%E1%84%8B%E1%85%AA-%E1%84%8E%E1%85%A2%E1%86%A8%E1%84%8B%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B4-%E1%84%8B%E1%85%B5%E1%84%8C%E1%85%A5%E1%86%AB)

전체 내용은 [배움을 기록](https://hyeonic.github.io/%EA%B8%B0%ED%83%80/woowacourse/precourse-3.html) 에서 확인할 수 있습니다.

## 🏗 최종 패키지 구조

 * main/java/vendingmachine
   * controller
     * VendingMachineController.java
   * domain
     * change
       * Change.java
       * Changes.java
     * investmentmoney
       * InvestmentMoney.java
     * possessioncoin
       * PossessionCoin.java
       * PossessionCoins.java
       * PossessionCoinsGenerator.java
       * RandomPossessionCoinsGenerator.java
     * possessionmoney
       * PossessionMoney.java
     * product
       * Name.java
       * Price.java
       * Quantity.java
       * Product.java
       * Products.java
     * productpurchase
       * ProductPurchase.java
     * Coin.java
     * VendingMachine.java
   * view
     * InputView.jva
     * OutputView.java
   * Application.java
 * test/java/vendingmachine
   * domain
     * investmentmoney
       * InvestmentMoneyTest.java
     * possessioncoin
       * PossessionCoinTest.java
       * PossessionCoinsTest.java
     * product
       * ProductTest.java
       * ProductsTest.java
     * productpurchase
       * ProductPurchaseTest.java
   * ApplicationTest.java

## 🥫 자판기 실행

### 🖥 정상 진행

```
자판기가 보유하고 있는 금액을 입력해 주세요.
450

자판기가 보유한 동전
500원 - 0개
100원 - 3개
50원 - 2개
10원 - 5개

상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20];[사이다,1000,10]

투입 금액을 입력해 주세요.
3000

투입 금액: 3000원
구매할 상품명을 입력해 주세요.
콜라

투입 금액: 1500원
구매할 상품명을 입력해 주세요.
사이다

투입 금액: 500원
잔돈
100원 - 3개
50원 - 2개
10원 - 5개
```

### 💣 에러 발생

<details>
<summary>자판기 보유 금액</summary>

1. 숫자가 아닌 경우
```
자판기가 보유하고 있는 금액을 입력해 주세요.
100a
[ERROR] 보유 금액은 숫자여야 합니다.
```

2. 음수인 경우
```
자판기가 보유하고 있는 금액을 입력해 주세요.
-450
[ERROR] 보유 금액은 음수가 될 수 없습니다.
```

3. 10으로 나누어 떨어지지 않는 경우
```
자판기가 보유하고 있는 금액을 입력해 주세요.
455
[ERROR] 보유 금액은 10으로 나누어 떨어져야 합니다.
```

</details>

<details>
<summary>상픔명과 가격, 수량 입력</summary>

1. 개별 상품을 '[]'로 감싸지 않은 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20;[사이다,1000,10]
[ERROR] 상품 입력은 '['로 시작하고 ']'로 끝나야 합니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20
[ERROR] 상품 입력은 '['로 시작하고 ']'로 끝나야 합니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
;;
[ERROR] 상품 입력은 '['로 시작하고 ']'로 끝나야 합니다.
```

2. 상품 입력 형식에 맞지 않는 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20][사이다,1000,10]
[ERROR] 상품 입력 방식이 맞지 않습니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20,사이다,1000,10]
[ERROR] 상품 입력 방식이 맞지 않습니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500]
[ERROR] 상품 입력 방식이 맞지 않습니다.
```

3. 상품 이름이 비어있거나 공백인 경우
```
상품명과 가격, 수량을 입력해 주세요.
[,1500,20]
[ERROR] 상품 이름이 비어있습니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
[ ,1000,10]
[ERROR] 상품 이름이 공백입니다.
```

4. 상품 가격이 정수가 아닌 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,150a,20]
[ERROR] 상품 가격은 숫자여야 합니다.
```

5. 상품 가격이 100원 미만 인 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,90,20]
[ERROR] 상품 가격은 100원 이상이여야 합니다.
```

6. 상품 가격이 10으로 나누어 떨어지지 않는 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1111,20]
[ERROR] 상품 가격은 10으로 나누어 떨어져야 합니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1,20]
[ERROR] 상품 가격은 100원 이상이여야 합니다.
```

7. 상품 수량이 정수가 아닌 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,1a]
[ERROR] 상품 수량은 숫자여야 합니다.
```

8. 상품 수량이 0개 이하인 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,0]
[ERROR] 상품 수량은 최소 1개 이상이어야 합니다.
```
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,-20]
[ERROR] 상품 수량은 최소 1개 이상이어야 합니다.
```

</details>

<details>
<summary>투입 금액 입력</summary>

1. 투입 금액이 정수가 아닌 경우
```
투입 금액을 입력해 주세요.
1a
[ERROR] 투입 금액은 숫자여야 합니다.
```

2. 투입 금액이 음수인 경우
```
투입 금액을 입력해 주세요.
-3000
[ERROR] 투입 금액은 음수가 될 수 없습니다.
```

3. 투입 금액이 10으로 나누어 떨어지지 않는 경우
```
투입 금액을 입력해 주세요.
3333
[ERROR] 투입 금액은 10으로 나누어 떨어져야 합니다.
```
```
투입 금액을 입력해 주세요.
111
[ERROR] 투입 금액은 10으로 나누어 떨어져야 합니다.
```

4. 투입 금액이 전체 상품의 가격보다 작은 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20];[사이다,1000,10]

투입 금액을 입력해 주세요.
500
[ERROR] 구매할 수 있는 상품이 없습니다.
```

</details>

<details>
<summary>구매할 상품명 입력</summary>

1. 구매 상품이 비어있거나 공백인 경우
```
투입 금액: 3000원
구매할 상품명을 입력해 주세요.

[ERROR] 상품명이 비어있습니다.
```
```
투입 금액: 3000원
구매할 상품명을 입력해 주세요.
 
[ERROR] 상품명은 공백이 될 수 없습니다.
```

2. 구매할 상품의 수량이 부족한 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,1];[사이다,1000,1]

투입 금액을 입력해 주세요.
10000

투입 금액: 10000원
구매할 상품명을 입력해 주세요.
콜라

투입 금액: 8500원
구매할 상품명을 입력해 주세요.
콜라
[ERROR] 상품의 수량이 부족합니다.
```

3. 금액이 부족하여 상품을 구입할 수 없는 경우
```
상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,1];[사이다,1000,1]

투입 금액을 입력해 주세요.
1000

투입 금액: 1000원
구매할 상품명을 입력해 주세요.
콜라
[ERROR] 금액 부족으로 상품을 구매할 수 없습니다.
```

4. 존재하지 않은 상품의 경우
```
투입 금액: 1000원
구매할 상품명을 입력해 주세요.
환타
[ERROR] 일치하는 상품명이 없습니다.
```

</details>